# High-precision numbers as pairs representing unevaluated sums
# Format is âŸ¨high,lowâŸ©

To   â‡ â‰â—‹<âŸœ0
From â‡ +Â´

Add12 â† {ağ•Šb:
  s â† a + b
  avâ† s - bvâ† s - a
  âŸ¨s, +Â´aâ€¿b-avâ€¿bvâŸ©
}
Add â‡ {ağ•Šb:
  r â† a +â—‹âŠ‘ b
  s â† (-r) +Â´ Â¯1âŒ½âŒ½âŸ(a<â—‹âŠ‘b) bâŒ½âŠ¸âˆ¾a
  r Add12 s
}

Neg â‡ -
Sub â‡ AddâŸœNeg

Cmp â‡ Ã— Â· (0=âŠ‘)âŠ¸âŠ‘ Sub

p â† 53  # Double-precision float
Split â† (1+2â‹†âŒˆpÃ·2){sp _ğ•£ a:
  c â† sp Ã— a
  alâ† a - ahâ† c - c - a
  âŸ¨al, ahâŸ© # Backwards for convenient reduction
}
Mul12 â† {ağ•Šb:
  h â† a Ã— b
  âŸ¨h, (-h) +Â´ â¥Š b Ã—âŒœâ—‹Split aâŸ©
}
Mul â‡ {ağ•Šb:
  phâ€¿pl â† a Mul12â—‹âŠ‘ b
  ph Add12 pl + +Â´ a Ã— âŒ½b
}

Div â‡ {bğ•Ša:
  yn â† (âŠ‘b) Ã— xn â† Ã·âŠ‘a
  diff â† âŠ‘ b Sub a Mul ynâ€¿0
  ynâ€¿0 Add xn Mul12 diff
}
